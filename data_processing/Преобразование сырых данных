Преобразование сырых данных в пригодный для моделей формат

Типичные файлы:

        normalizer.py — Нормализация данных
class ZScoreNormalizer:
    def __init__(self, window=100):
        self.window = window

    def transform(self, data: pd.Series):
        rolling_mean = data.rolling(self.window).mean()
        rolling_std = data.rolling(self.window).std()
        return (data - rolling_mean) / rolling_std

        feature_engineer.py — Создание фичей
def add_features(df: pd.DataFrame):
    # Технические индикаторы
    df['rsi'] = ta.rsi(df['close'], length=14)
    df['obv'] = ta.obv(df['close'], df['volume'])
    # Стаканные фичи
    df['bid_ask_spread'] = df['ask_price'] - df['bid_price']
    df['order_book_imbalance'] = df['bid_volume'] / (df['ask_volume'] + 1e-6)
    return df

        data_cleaner.py — Очистка данных
def clean_data(df: pd.DataFrame):
    # Удаление выбросов
    df = df[(df['price'] > df['price'].quantile(0.01)) &
            (df['price'] < df['price'].quantile(0.99))]
    # Заполнение пропусков
    df['volume'].ffill(inplace=True)
    return df